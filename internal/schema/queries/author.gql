fragment AuthorRelease on authors {
    name
    slug
    contributions(
      where: {
        contribution: {_is_null: true}, # only get Authors
        book: {
          release_date: {_lte: $to, _gte: $from},
          book_mappings: {id: {_is_null: false}},
          compilation: {
            _in: [$compilations, false]
          }
        }
      }
      order_by: {book: {release_date: desc_nulls_last}}
      limit: 25
    ) {
      author {
        name
      }
      # @genqlient(flatten: true)
      book {
        ...Book
      }
    }
}

query RecentAuthorReleases($to: date, $from: date, $slug: [String!], $compilations: Boolean = false) {
  # @genqlient(flatten: true)
  authors(where: {
    slug: {_in: $slug}
  }) {
    ...AuthorRelease
  }
}

query RecentAuthorReleasesById($to: date, $from: date, $ids: [Int!], $compilations: Boolean = false) {
  # @genqlient(flatten: true)
  authors(where: {
    id: {_in: $ids}
  }) {
    ...AuthorRelease
  }
}
