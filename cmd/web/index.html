<!DOCTYPE html>
<html lang="en">

<head>
	<title>Hardcover Feed Generator</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="/static/style.css">
	<script src="/static/alpine.min.js" defer></script>
	<link rel="icon" href="data:image/png;base64,iVBORw0KGgo=">
	<script>
		function showNotification() {
			const notification = document.getElementById('notification');
			notification.classList.add('show');
			setTimeout(() => notification.classList.remove('show'), 2000);
		}
	</script>
</head>

<body x-data="{ 
	showNotification() {
		const notification = document.getElementById('notification');
		notification.classList.add('show');
		setTimeout(() => notification.classList.remove('show'), 2000);
	}
}">
	<header class="header">
		<div class="container">
			<h1>Hardcover Feeds</h1>
			<p>Generate RSS, Atom or JSON feeds for Hardcover.app releases</p>
		</div>
	</header>
	<main class="main container">
		<section class="card" x-data="{ 
			getUrl(format) { return `${window.location.origin}/hc/recent.${format}`; },
			showNotification() {
				const notification = document.getElementById('notification');
				notification.classList.add('show');
				setTimeout(() => notification.classList.remove('show'), 2000);
			}
		}">
			<h2>Recent Releases</h2>
			<p>
				Equivalent to the list on
				<a href="https://hardcover.app/upcoming/recent" target="_blank" class="link">
					upcoming/recent
				</a>
				on Hardcover.app
			</p>
			<div class="space-y-3">
				<template x-for="format in ['rss', 'atom', 'json']" :key="format">
					<div class="input-group">
						<input type="text" readonly x-bind:value="getUrl(format)"
							:id="`recent-${format}`" @click="$event.target.select()" class="form-input">
						<button class="btn copy-btn" @click="navigator.clipboard.writeText(getUrl(format)).then(() => showNotification())">
							Copy <span x-text="format.toUpperCase()"></span>
						</button>
					</div>
				</template>
			</div>
		</section>

		<section class="card" x-data="{ 
			author: '', 
			getUrl(format) { return this.author ? `${window.location.origin}/hc/author/${this.author}.${format}` : ''; },
			showNotification() {
				const notification = document.getElementById('notification');
				notification.classList.add('show');
				setTimeout(() => notification.classList.remove('show'), 2000);
			}
		}">
			<h2>Author Releases</h2>
			<p x-show="author">
				View on Hardcover:
				<a :href="`https://hardcover.app/authors/${author}`" target="_blank" class="link">
					https://hardcover.app/authors/<span x-text="author"></span>
				</a>
			</p>
			<div class="form-group">
				<label for="author">Author Slug</label>
				<input type="text" id="author" placeholder="e.g. brandon-sanderson" x-model="author"
					class="form-control" x-on:input="author = author.replace(/[^a-zA-Z0-9-]/g, '')">
			</div>
			<div class="space-y-3" x-show="author">
				<template x-for="format in ['rss', 'atom', 'json']" :key="format">
					<div class="input-group">
						<input type="text" readonly
							x-bind:value="getUrl(format)"
							:id="`author-${format}`" @click="$event.target.select()" class="form-input">
						<button class="btn copy-btn" @click="navigator.clipboard.writeText(getUrl(format)).then(() => showNotification())">
							Copy <span x-text="format.toUpperCase()"></span>
						</button>
					</div>
				</template>
			</div>
		</section>

		<section class="card" x-data="{ 
			series: '', 
			getUrl(format) { return this.series ? `${window.location.origin}/hc/series/${this.series}.${format}` : ''; },
			showNotification() {
				const notification = document.getElementById('notification');
				notification.classList.add('show');
				setTimeout(() => notification.classList.remove('show'), 2000);
			}
		}">
			<h2>Series Releases</h2>
			<p x-show="series">
				View on Hardcover:
				<a :href="`https://hardcover.app/series/${series}`" target="_blank" class="link">
					https://hardcover.app/series/<span x-text="series"></span>
				</a>
			</p>
			<div class="form-group">
				<label for="series">Series Slug</label>
				<input type="text" id="series" placeholder="e.g. dungeon-crawler-carl" x-model="series"
					class="form-control" x-on:input="series = series.replace(/[^a-zA-Z0-9-]/g, '')">
			</div>
			<div class="space-y-3" x-show="series">
				<template x-for="format in ['rss', 'atom', 'json']" :key="format">
					<div class="input-group">
						<input type="text" readonly
							x-bind:value="getUrl(format)"
							:id="`series-${format}`" @click="$event.target.select()" class="form-input">
						<button class="btn copy-btn" @click="navigator.clipboard.writeText(getUrl(format)).then(() => showNotification())">
							Copy <span x-text="format.toUpperCase()"></span>
						</button>
					</div>
				</template>
			</div>
		</section>

		<section class="card" x-data="{ 
			username: '', 
			getUrl(format) { return this.username ? `${window.location.origin}/hc/me/${this.username}.${format}` : ''; },
			getFilterUrl(filter) { return `${window.location.origin}/hc/me/${this.username}?filter=${filter}`; },
			showNotification() {
				const notification = document.getElementById('notification');
				notification.classList.add('show');
				setTimeout(() => notification.classList.remove('show'), 2000);
			}
		}">
			<h2>My Releases</h2>
			<p x-show="username">
				View on Hardcover:
				<a :href="`https://hardcover.app/@${username}`" target="_blank" class="link">
					https://hardcover.app/@<span x-text="username"></span>
				</a>
			</p>
			<p>
				Generate feeds for authors and series you follow based on your Hardcover reading history (only authors
				or series with more than 1 book read will appear in this feed)
			</p>
			<div class="form-group">
				<label for="username">Username</label>
				<input type="text" id="username" placeholder="e.g. jules" x-model="username" class="form-control"
					x-on:input="username = username.replace(/[^a-zA-Z0-9-]/g, '')">
			</div>
			<div class="space-y-3" x-show="username">
				<template x-for="format in ['rss', 'atom', 'json']" :key="format">
					<div class="input-group">
						<input type="text" readonly
							x-bind:value="getUrl(format)"
							:id="`user-${format}`" @click="$event.target.select()" class="form-input">
						<button class="btn copy-btn" @click="navigator.clipboard.writeText(getUrl(format)).then(() => showNotification())">
							Copy <span x-text="format.toUpperCase()"></span>
						</button>
					</div>
				</template>
				<div class="form-group">
					<label>Filter Options:</label>
					<div class="filter-options">
						<a :href="getFilterUrl('author')" target="_blank"
							class="link">Author Only</a> |
						<a :href="getFilterUrl('series')" target="_blank"
							class="link">Series Only</a>
					</div>
				</div>
			</div>
		</section>

		<div id="notification" class="notification">
			Copied to clipboard!
		</div>
	</main>
	<footer class="footer container">
		<p>Generated by <a href="https://github.com/RobBrazier/hardcover-rss" target="_blank" class="link">Hardcover
				Feed Generator</a></p>
	</footer>
</body>

</html>
